## 模块机制 ##
### 2.1 Node的模块实现 ###
在Node中引入模块，需要经历3个步骤：

1. 路径分析	
2. 文件定位
3. 编译执行

在Node中，模块分为两类：一类是Node提供的模块，称为核心模块；另一类是用户编写的模块，称为文件模块。
#### 2.1.1 优先从缓存加载 ####
与前端浏览器的缓存不同的是，Node缓存的是编译和执行之后的对象。缓存是处于第一优先级的。
#### 2.2.2 路径分析和文件定位 ####
模块标识符在Node中主要分为以下几类：

- 核心模块，如http、fs、path等
- .或..开始的相对路径文件模块
- 以/开始的绝对路径文件模块
- 非路径形式的文件模块，如自定义的connect模块

有一点需要注意的是，require()在分析标识符的过程中，会出现标志服众不含文件扩展名的情况。这时，Node会按.js、.node、.json的次序补足扩展名，再依次尝试。

#### 2.2.3 模块编译 ####
编译和执行是引入文件模块的最后一个阶段，Node会新建一个模块对象，然后根据路径载入并编译。对于不同的文件扩展名，其载入的方法有所不同，具体如下：

- .js文件。通过fs模块同步读取文件后编译执行。
- .node文件。这是用C/C++编写的扩展文件，通过dlopen()方法加载最后编译生成的文件。
- .json文件。通过fs模块同步读取文件后，用JSON.parse()解析返回结果。
- 其余文件扩展名。它们都会被当做.js文件载入。

